<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica, sans-serif;
    width: 100vw;
    height: 110vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    color: white;
    align-items: center;
    gap: 4rem;
}
h1 {
    text-align: center;
    margin-bottom: 30px;
}
.form-container {
    width: 20rem;
    height: 18rem;
    padding: 3rem;
    display: flex;
    flex-direction: column;
    background-color: rgb(25, 151, 224);
    border-radius: 5px;
    box-shadow: 5px 5px rgb(25, 151, 224, 0.5);
}
#search-form {
    display: flex;
    flex-direction: column;
    gap: 4px;
}
label {
    font-size: 1.2em;
    font-weight: 500;
}
button {
    width: 10rem;
    height: 3rem;
    color: white;
    background-color: rgb(14, 14, 14);
    border-radius: 3px;
    border: none;
    font-size: 1.1em;
    font-weight: 400;
    cursor: pointer;
    transition-duration: 150ms;
    margin-top: 15px;
}
button:hover {
    opacity: 0.8;
}
button:active {
    opacity: 0.6;
}
select {
    width: 10rem;
    height: 1.5rem;
    border-radius: 3px;
    border: none;
}
.result-containter {
    width: 40rem;
    height: 20rem;
    border-radius: 5px;
    padding: 3rem;
    background-color: rgb(25, 151, 224);
}
.product {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 5px;
}
    </style>
</head>
<body>
    <section class="form-container">
        <h1>Product Search</h1>
        <form id="search-form">
          <label for="category">Select category</label>
          <select id="category" name="category">
            <option value="all">All</option>
            <option value="electronics">Electronics</option>
            <option value="clothing">Clothing</option>
          </select>
          <label for="filter">Filter by</label>
          <select id="filter" name="filter">
            <option value="price">Price</option>
            <option value="name">Name</option>
          </select>
          <label for="order">Order:</label>
          <select id="order" name="order">
            <option value="asc">Ascending</option>
            <option value="desc">Descending</option>
          </select>
          <button type="submit">Search</button>
        </form>
      </section>
    
      <section class="result-containter">
        <h2>Search result :</h2>
        <div id="result">No result yet</div>
      </section>
    
      <script>
        const resultDiv = document.querySelector("#result");
    
        document.querySelector("#search-form").addEventListener('submit', async (e) => {
          e.preventDefault();
    
          const category = document.querySelector("#category").value;
          const filter = document.querySelector("#filter").value;
          const order = document.querySelector("#order").value;
    
          const url = `/product?category=${encodeURIComponent(category)}&filter=${encodeURIComponent(filter)}&order=${encodeURIComponent(order)}`;
    
          try {
            const response = await fetch(url);
            const products = await response.json();
    
            resultDiv.innerHTML = ''; // Clear previous results
    
            if (products.length === 0) {
              resultDiv.innerHTML = `<p>No product found.</p>`;
            } else {
              products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product';
                productDiv.innerHTML = `<strong>${product.name}</strong> - $${product.price} (${product.category})`;
                resultDiv.appendChild(productDiv);
              });
            }
          } catch (err) {
            console.error(err);
            resultDiv.innerHTML = `<p>An error occurred while fetching data.</p>`;
          }
        });
      </script>
    </body>
    </html>